<div id="horses">
  <% for horse in @horses -%>
    <% form_for "horse_#{horse.id}", horse do |f| -%>
      <p>
        <%= f.label :name %>
        <%= f.text_field :name %>
      </p>
      <p>
        <%= f.label :color %>
        <%= f.text_field :color %>
      </p>
      <p class="button">
        <%= submit_tag "Save" %>
      </p>
    <% end -%>
    <%= button_to "Delete", horse, :method => :delete, :class => "confirm" %>
  <% end -%>
</div>

<h2>New horse</h2>

<% form_for Horse.new, :html => {:class => "remote confirm", "update-success-bottom" => "horses",
  "update-failure-top" => "new_horse", "onComplete" => "alert('COMPLETE')", :onSuccess => "alert('SUCCESS')",
  :onFailure => "alert('F-A-I-L')"} do |f| -%>
    <p>
      <%= f.label :name %>
      <%= f.text_field :name %>
    </p>
    <p>
      <%= f.label :color %>
      <%= f.text_field :color %>
    </p>
    <p class="button">
      <%= submit_tag "Create" %>
    </p>
<% end -%>
